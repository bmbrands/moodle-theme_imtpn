define("theme_imtpn/sharing_cart_ext",["exports","jquery","core/config","core/loadingicon"],(function(_exports,_jquery,_config,_loadingicon){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_config=_interopRequireDefault(_config);_exports.init=()=>{document.addEventListener("resource_library_card_rendered",(()=>{const addToBasketCB=event=>{if(_jquery.default){const iconPromise=(0,_loadingicon.addIconToContainerWithPromise)(event.currentTarget),courseid=document.querySelector(".local-resourcelibrary.block-cards").dataset.parentId;_jquery.default.post(_config.default.wwwroot+"/blocks/sharing_cart/rest.php",{action:"backup",cmid:event.target.parentElement.dataset.moduleId,userdata:!1,sesskey:_config.default.sesskey,courseid:courseid}).then((()=>{_jquery.default.post(_config.default.wwwroot+"/blocks/sharing_cart/rest.php",{action:"render_tree",courseid:courseid},(function(response){(0,_jquery.default)(".block_sharing_cart .tree").replaceWith((0,_jquery.default)(response)),_jquery.default.init_item_tree()}),"html").catch((error=>window.console.log(error))),iconPromise.resolve()}))}};document.querySelectorAll(".resource-library-activities .sharing-cart-icon").forEach((element=>{element.onclick=addToBasketCB}))}))}}));

//# sourceMappingURL=sharing_cart_ext.min.js.map